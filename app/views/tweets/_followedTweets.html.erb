<div class="mt-2">
<div class="tweets container">
    <% tweets.each do |tweet| %>
        <% if @user.followed_users.include? tweet.user or tweet.user == @user%> <!--#TODO ver si es necesario el OR-->
            <!--user photo -->
            <div class="row bg-light rounded-pill py-3">
                <div class="col-md-2">
                    <%= image_tag tweet.user.photo, class:'img-fluid rounded-circle size:"150x150"' %>
                </div>
                <div class="col-md-10">
                    <div class="row">
                    <!--like and retweet if user is logged -->
                        <% if user_signed_in? %>
                            <!--like button-->
                            <div class="like col-md-4 text-center">
                                    <div class="row">
                                        <div class="col-md-9 p-0">
                                            <div class="d-flex justify-content-end font-weight-bold text-primary"><%= tweet.count_likes%></div>
                                        </div>
                                        <% if tweet.liked?(@user) %>
                                            <div class="col-md-3 p-0">
                                                <%= link_to destroy_like_path(tweet), method: :delete do %>
                                                    <div class="text-danger pl-0"><%= svg('heart-fill')%> Dislike</div>
                                                <% end %>
                                            </div>
                                        <% else %>
                                            <div class="col-md-3 p-0">
                                                <%= link_to create_like_path(tweet), method: :post do %>
                                                    <div class="text-danger pl-0"><%= svg('heart')%> Like</div>
                                                <% end %>
                                            </div>
                                        <% end %>
                                    </div>
                            </div>
                            <!--retweet button-->
                            <div class="like col-md-4 text-center">
                                <div class="rt row">
                                    <div class="col-md-3 p-0">
                                        <div class="font-weight-bold text-primary d-flex justify-content-end pr-2"><%= Tweet.count_retweets(tweet)%></div>
                                    </div>
                                    <div class="col-md-9 p-0">
                                        <%= link_to create_retweet_path(tweet) ,method: :post do %>
                                            <div class="col-md-9 p-0 d-flex justify-content-start"><%= svg('retweet') %> Rt</div>
                                        <% end %>
                                    </div>
                                </div>
                            </div>
                        <% else %>
                        <!-- like and retweet if user isn't logged -->
                            <!--like button-->
                            <div class="like col-md-4 text-center">
                                <div class="row">
                                    <div class="col-md-9 p-0">
                                        <div class="d-flex justify-content-end font-weight-bold text-primary"><%= tweet.count_likes%></div>
                                    </div>
                                    <div class="col-md-3 p-0">
                                        <%= link_to new_user_session_path do %>
                                            <div class="text-danger pl-0"><%= svg('heart-fill')%> Like</div>
                                        <% end %>
                                    </div>
                                </div>
                            </div>
                            <!--retweet button-->
                            <div class="like col-md-4 text-center">
                                <div class="row">
                                    <div class="col-md-3 p-0">
                                        <div class="font-weight-bold text-primary d-flex justify-content-end pr-2"><%= Tweet.count_retweets(tweet)%></div>
                                    </div>
                                    <div class="col-md-9 p-0 d-flex justify-content-start">
                                        <%= link_to new_user_session_path do %>
                                            <div class="text-info pl-0"><%= svg('retweet') %> Rt</div>
                                        <% end %>
                                    </div>
                                </div>
                            </div>   
                        <% end %>
                        <!-- date of the tweet -->
                        <div class="date col-md-4">
                            <% if user_signed_in? %>
                                <%= link_to user_tweet_path(@user, tweet) do %>
                                    <p><%=time_ago_in_words(tweet.created_at) %> ago</p>
                                <% end %>
                            <% else %>
                                <%= link_to new_user_session_path do %>
                                    <p><%=time_ago_in_words(tweet.created_at) %> ago</p>
                                <% end %>
                            <% end %>
                        </div>
                    </div>
                    <!-- content container -->
                    <div class="row m-5 py-3 rounded-pill">
                        <div class="content col-md h4">
                            <%= hashtag(tweet.content) %>
                        </div>
                    </div>
                </div>
            </div>
            <br>
        <% end %>
    <% end %>
</div>